library(roxygen2)
install.packages("roxygen2")
roxygenize(package.dir = ".")
library(roxygen2)
roxygenize(package.dir = ".")
document()
library(RCSM)
ls()
cmapScore()
A <- matrix(rnorm(30), ncol = 5)
A
colnames(A) <- LETTERS[1:5]
rownames(A) <- letters[1:5]
rownames(A) <- letters[1:6]
A
cmapScore(A, c("a", "b"), c("e", "f"), permuteNum = 1000)
library(parallel)
cmapScore(A, c("a", "b"), c("e", "f"), permuteNum = 1000)
q()
getwd()
roxygen2::roxygenise()
ls()
library(RCSM)
ls()
?GSEAweight0Score
roxygen2::roxygenise()
library(RCSM)
?cmapScore
ref <- matrix(rnorm(1000), nrow = 10,
dimnames = c(LETTERS[1:10], letters[1:1000]))
Up <- c("A", "B")
Down <- c("I", "J")
ref <- matrix(rnorm(1000), nrow = 10,dimnames = list(LETTERS[1:10], letters[1:1000]))
?list
ref <- matrix(rnorm(1000), nrow = 10,dimnames = list(LETTERS[1:10], letters[1:100]))
ref
ref <- matrix(rnorm(1000), nrow = 10,dimnames = list(LETTERS[1:10], paste0("drug", 1:100)))
ref
Up <- c("A", "B")
Down <- c("I", "J")
cmapScore(refMatrix = ref, queryUp = Up, queryDown = Down)
library(parallel)
cmapScore(refMatrix = ref, queryUp = Up, queryDown = Down)
GSEAweight0Score(refMatrix = ref, queryUp = Up, queryDown = Down)
UP
Up
Down
Up <- c("gene1", "gene2")
Down <- c("gene99", "gene100")
GSEAweight0Score(refMatrix = ref, queryUp = Up, queryDown = Down)
rm(list = ls())
roxygen2::roxygenise()
??simil
library(proxy)
proxy::simil()
?proxy::simil()
rm(list = ls())
roxygen2::roxygenise()
q()
roxygen2::roxygenize()
install.packages("proxy")
source("https://bioconductor.org/biocLite.R")
source("https://bioconductor.org/biocLite.R")
biocLite("proxy")
library(proxy)
biocLite("proxy")
biocLite("proxy")
biocLite("proxy")
library(proxy)
install.packages("proxy")
biocLite("proxy")
biocLite("proxy")
biocLite("proxy")
install_github('andreacirilloac/updateR')
install.packages('devtools')
library(devtools)
install_github('andreacirilloac/updateR')
library(updateR)
biocLite("pacman")
library(ggplot2)
install.packages("proxy")
install.packages("ggplot2")
install.packages("paralell")
install.packages("parallel")
getwd()
roxygen2::roxygenise()
install.packages("roxygen2")
roxygen2::roxygenise()
library(RCSM)
?cmapScore
?list
?cor
roxygen2::roxygenise()
library(RCSM)
?cmapScore
ref <- matrix(rnorm(1000), nrow = 10,
dimnames = list(paste0("gene", 1:10), paste0("drug", 1:100))
)
Up <- c("gene1", "gene2")
Down <- c("gene9", "gene10")
cmapScore(refMatrix = ref, queryUp = Up, queryDown = Down)
ref[,1]
order(ref[,1], decreasing = TRUE)
names(order(ref[,1], decreasing = TRUE))
names(ref[order(ref[,1], decreasing = TRUE), 1])
names(ref[order(ref[,2], decreasing = TRUE), 2])
?zhangScore
zhangScore(refMatrix = ref, queryUp = Up, queryDown = Down)
refSort <- ref[order(abs(ref[, 1]), decreasing=TRUE), 1]
refRank <- rank(abs(refSort)) * sign(refSort)
refRank
refSort <- ref[order(abs(ref[, 2]), decreasing=TRUE), 2]
refRank <- rank(abs(refSort)) * sign(refSort)
refRank
refSort <- ref[order(abs(ref[, 3]), decreasing=TRUE), 3]
refRank <- rank(abs(refSort)) * sign(refSort)
refRank
1/34
?GSEAweight0Score
GSEAweight0Score(refMatrix = ref, queryUp = Up, queryDown = Down)
GSEAweight1Score(refMatrix = ref, queryUp = Up, queryDown = Down)
GSEAweight2Score(refMatrix = ref, queryUp = Up, queryDown = Down)
names(refMatrix[order(refMatrix[, 1], decreasing=TRUE), 1])
names(ref[order(ref[, 1], decreasing=TRUE), 1])
names(ref[order(ref[, 2], decreasing=TRUE), 2])
11/8
ref[order(ref[, 2], decreasing=TRUE), 2]
0.771090501+0.075698309+0.035755025+0.038904135
0.771090501/0.921448
-5/8+(0.035755025+0.038904135)/0.921448
0.8368248+0.5439763
0.771090501/(0.771090501+0.075698309)
0.9106054+5/8
?GSEAweight1Score
?GSEAweight2Score
?eXtremeSumScore
eXtremeSumScore(refMatrix = ref, queryUp = Up, queryDown = Down, topN = 4)
c(head(ref[order(ref[, 1], decreasing=TRUE), 1],
n = 4),
tail(ref[order(ref[, 1], decreasing=TRUE), 1],
n = 4))
c(head(ref[order(ref[, 2], decreasing=TRUE), 2],
n = 4),
tail(ref[order(ref[, 2], decreasing=TRUE), 2],
n = 4))
0.4098446-1.3635751-1.2071322
-0.4098446+1.3635751-1.2071322
-0.03890413-0.77109050-0.07569831
?eXtremeCosScore
query <- rnorm(4)
names(query) <- c("gene1", "gene2", "gene9", "gene10")
query
eXtremeCosScore(refMatrix = ref, query = query, topN = 4)
eXtremeCosScore(refMatrix = ref, query = query, topN = 4, mcCore = 3)
refList <- rnorm(10)
names(refList) <- LETTERS[1:10]
query <- rnorm(5)
names(query) <- LETTERS[8:12]
refList
query
reservedRef <- refList[match(intersect(names(refList), names(query)),
names(refList))]
reservedQuery <- query[match(intersect(names(refList), names(query)),
names(query))]
reservedRef
reservedQuery
merge(reservedRef, reservedQuery, by = "row.names")[, 2]
merge(reservedRef, reservedQuery, by = "row.names")[, 3]
return(simil(merge(reservedRef, reservedQuery, by = "row.names")[, 2],
merge(reservedRef, reservedQuery, by = "row.names")[, 3],
method = "cosine", by_rows = F)[1, 1])
library(simil)
library(proxy)
simil(merge(reservedRef, reservedQuery, by = "row.names")[, 2],
merge(reservedRef, reservedQuery, by = "row.names")[, 3],
method = "cosine", by_rows = F)[1, 1]
abs(crossprod(reservedRef, reservedQuery) / sqrt(crossprod(reservedRef) * crossprod(reservedQuery))
)
crossprod(reservedRef, reservedQuery) / sqrt(crossprod(reservedRef) * crossprod(reservedQuery))
sort(reservedQuery)
?sort
reservedQuery[order(names(reservedQuery))]
refList <- rnorm(10)
names(refList) <- LETTERS[1:10]
query <- rnorm(5)
names(query) <- LETTERS[11:15]
reservedRef <- refList[match(intersect(names(refList), names(query)),
names(refList))]
reservedQuery <- query[match(intersect(names(refList), names(query)),
names(query))]
reservedRef
reservedQuery
crossprod(reservedRef, reservedQuery) / sqrt(crossprod(reservedRef) * crossprod(reservedQuery))
0 > NaN
is.null(reservedRef)
reservedRef
length(reservedRef)
length(reservedRef) == 0
reservedRef[order(names(reservedRef))]
match(LETTERS[8:12], LETTERS[1:10])
x <- LETTERS[8:12]
x[match(LETTERS[8:12], LETTERS[1:10])]
x
x[match(LETTERS[1:10], LETTERS[8:12])]
intersect(LETTERS[1:10], LETTERS[8:12])
rm(list = ls())
roxygen2::roxygenise()
library(RCSM)
?eXtremeCosScore
set.seed(1234)
ref <- matrix(rnorm(1000), nrow = 10,
dimnames = list(paste0("gene", 1:10), paste0("drug", 1:100)))
query <- rnorm(4)
names(query) <- c("gene1", "gene2", "gene9", "gene10")
query
eXtremeCosScore(refMatrix = ref, query = query, topN = 4, mcCore = 3)
query
c(head(ref[order(ref[, 1], decreasing=TRUE), 1],
n = 4),
tail(ref[order(refMatrix[, 1], decreasing=TRUE), 1],
n =4))
c(head(ref[order(ref[, 1], decreasing=TRUE), 1],
n = 4),
tail(ref[order(ref[, 1], decreasing=TRUE), 1],
n =4))
c(head(ref[order(ref[, 2], decreasing=TRUE), 2],
n = 4),
tail(ref[order(ref[, 2], decreasing=TRUE), 2],
n =4))
crossprod(query[c(1,2,4)], c(-1.2070657, 0.2774292, -0.8900378))
crossprod(query[c(1,2,4)], c(-1.2070657, 0.2774292, -0.8900378))/sqrt(crossprod(query[c(1,2,4)]) * c(-1.2070657, 0.2774292, -0.8900378))
crossprod(query[c(1,2,4)], c(-1.2070657, 0.2774292, -0.8900378))/sqrt(crossprod(query[c(1,2,4)]) * crossprod(c(-1.2070657, 0.2774292, -0.8900378)))
crossprod(query[c(2,3,4)], c(-0.99838644, -0.83717168, 2.41583518))/sqrt(crossprod(query[c(2,3,4)]) * crossprod(c(-0.99838644, -0.83717168, 2.41583518)))
cmapScore(1:4, 1:5)
test <- data.frame(x = 1:5, y = rnorm(5))
rownames(test) <- LETTERS[1:5]
cmapScore(test, c("A", "B"))
cmapScore(test, c("A", "B"), 1:2)
q()
getwd()
ls()
install.packages("devtools")
devtools::create_description()
library(devtools)
install_github("Jasonlinchina/RCSM")
library(RCSM)
?cmapScore
devtools::use_gpl3_license()
q()
setwd("~/Downloads/validation_positiveSignatures/MCF7/posDrugsInTop/")
library(ggplot2)
library(gcookboook)
cabbage_exp
install.packages("gcookbook")
library(gcookbook)
cabbage_exp
library(xlsx)
require(xlsx)
install.packages("xlsx")
require(xlsx)
setwd("~/Downloads/validation_positiveSignatures/MCF7/posDrugsInTop/")
ls()
getwd()
data <- read.xlsx("statRes.xlsx", sheetName = "forPicture", header = T)
data
ggplot(data, aes(x = method, y = number, group = correlation)) + geom_bar()
ggplot(data, aes(x = method, y = number, fill = correlation)) + geom_bar()
ggplot(data, aes(x = method, y = number, fill = correlation)) +
geom_bar(stat = "indentity")
ggplot(data, aes(x = method, y = number, fill = correlation)) +
geom_bar(stat = "identity")
ggplot(data, aes(x = method, y = number, fill = correlation)) +
geom_bar(stat = "identity", position=position_dodge())
ggplot(data, aes(x = method, y = number, fill = correlation)) +
geom_bar(stat = "identity", position=position_dodge()) +
theme(axis.text.x = element_text(angle = 45, size = 2))
ggplot(data, aes(x = method, y = number, fill = correlation)) +
geom_bar(stat = "identity", position=position_dodge()) +
theme(axis.text.x = element_text(angle = 45))
ggplot(data, aes(x = order(method, number), y = number, fill = correlation)) +
geom_bar(stat = "identity", position=position_dodge()) +
theme(axis.text.x = element_text(angle = 45))
pdf(file = "statRes.pdf", onefile = F)
ggplot(data, aes(x = order(method, number), y = number, fill = correlation)) +
geom_bar(stat = "identity", position=position_dodge()) +
theme(axis.text.x = element_text(angle = 45)) +
scale_fill_manual(values=c('#F8766D','#00BFC4'))
dev.off()
pdf(file = "statRes.pdf", onefile = F)
ggplot(data, aes(x = method, y = number, fill = correlation)) +
geom_bar(stat = "identity", position=position_dodge()) +
theme(axis.text.x = element_text(angle = 45)) +
scale_fill_manual(values=c('#F8766D','#00BFC4'))
dev.off()
pdf(file = "statRes.pdf", onefile = F)
ggplot(data, aes(x = method, y = number, fill = correlation)) +
geom_bar(stat = "identity", position=position_dodge()) +
theme(axis.text.x = element_text(angle = 45)) +
scale_fill_manual(values=c('#00BFC4', '#F8766D'))
dev.off()
?axis.text.x
?element_text()
pdf(file = "statRes.pdf", onefile = F)
ggplot(data, aes(x = method, y = number, fill = correlation)) +
geom_bar(stat = "identity", position=position_dodge()) +
theme(axis.text.x = element_text(angle = 45, hjust = 0.5, vjust = 0.5)) +
scale_fill_manual(values=c('#00BFC4', '#F8766D'))
dev.off()
pdf(file = "statRes.pdf", onefile = F)
ggplot(data, aes(x = method, y = number, fill = correlation)) +
geom_bar(stat = "identity", position=position_dodge()) +
theme(axis.text.x = element_text(angle = 45, hjust = 0, vjust = 0.5)) +
scale_fill_manual(values=c('#00BFC4', '#F8766D'))
dev.off()
pdf(file = "statRes.pdf", onefile = F)
ggplot(data, aes(x = method, y = number, fill = correlation)) +
geom_bar(stat = "identity", position=position_dodge()) +
theme(axis.text.x = element_text(angle = 45, hjust = 0.5, vjust = 0)) +
scale_fill_manual(values=c('#00BFC4', '#F8766D'))
dev.off()
pdf(file = "statRes.pdf", onefile = F)
ggplot(data, aes(x = method, y = number, fill = correlation)) +
geom_bar(stat = "identity", position=position_dodge()) +
theme(axis.text.x = element_text(angle = 45, hjust = 0.5, vjust = 0.5)) +
scale_fill_manual(values=c('#00BFC4', '#F8766D'))
dev.off()
pdf(file = "statRes.pdf", onefile = F)
ggplot(data, aes(x = method, y = number, fill = correlation)) +
geom_bar(stat = "identity", position=position_dodge()) +
theme(axis.text.x = element_text(angle = 45, hjust = 1, vjust = 0.5)) +
scale_fill_manual(values=c('#00BFC4', '#F8766D'))
dev.off()
pdf(file = "statRes.pdf", onefile = F)
ggplot(data, aes(x = method, y = number, fill = correlation)) +
geom_bar(stat = "identity", position=position_dodge()) +
theme(axis.text.x = element_text(angle = 45, hjust = 1, vjust = 1)) +
scale_fill_manual(values=c('#00BFC4', '#F8766D'))
dev.off()
data
pdf(file = "statRes.pdf", onefile = F)
ggplot(data, aes(x = method, y = number, fill = correlation)) +
geom_bar(stat = "identity", position=position_dodge()) +
theme(axis.text.x = element_text(angle = 45, hjust = 1, vjust = 1)) +
scale_fill_manual(values=c('#F8766D', '#00BFC4'))
dev.off()
pdf(file = "statRes.pdf", onefile = F)
ggplot(data, aes(x = method, y = number, fill = correlation, label = number)) +
geom_bar(stat = "identity", position=position_dodge()) +
theme(axis.text.x = element_text(angle = 45, hjust = 1, vjust = 1)) +
scale_fill_manual(values=c('#00BFC4', '#F8766D'))
dev.off()
data
pdf(file = "statRes.pdf", onefile = F)
ggplot(data, aes(x = method, y = number, fill = correlation)) +
geom_bar(stat = "identity", position=position_dodge()) +
theme(axis.text.x = element_text(angle = 45, hjust = 1, vjust = 1)) +
scale_fill_manual(values=c('#00BFC4', '#F8766D')) +
scale_x_discrete(limits = c("zhangscore", "GSEAweight1", "GSEAweight0",
"cMAP", "GSEAweight2", "eXtremeSum"))
dev.off()
q()
source("https://bioconductor.org/biocLite.R")
source("https://bioconductor.org/biocLite.R")
q()
